<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta  content="text/html; charset=utf-8" http-equiv="Content-Type"/>


<link  href="01-reset-fonts-grids-base.css" type="text/css" rel="StyleSheet"/>
<link  href="02-docstyle.css" type="text/css" rel="StyleSheet"/>
<link  href="syntax.css" type="text/css" rel="StyleSheet"/>
<title>Filter expressions</title></head><body><div id="doc">
    <div style="" id="hd" class="doc">
                <div id="nav">
                        <a href="anticache.html">prev</a>
 |
            <a href="index.html">index</a> |
                        <a href="scripts.html">next</a>

        </div>

        <h1><a href="index.html">mitmproxy 0.6 docs</a></h1>
    </div>
    <div id="bd">
        <div id="yui-main">
            <div style="" class="yui-b">
                <h1>Filter expressions</h1>
                <p>Many commands in <strong>mitmproxy</strong> and <strong>mitmdump</strong> take a filter expression.
Filter expressions consist of the following operators:</p>

<table>
        <tr>
            <td class="filt_cmd">~b regex</td>
            <td class="filt_help">Body</td>
        </tr>
        <tr>
            <td class="filt_cmd">~bq regex</td>
            <td class="filt_help">Request body</td>
        </tr>
        <tr>
            <td class="filt_cmd">~bs regex</td>
            <td class="filt_help">Response body</td>
        </tr>
        <tr>
            <td class="filt_cmd">~c int</td>
            <td class="filt_help">HTTP response code</td>
        </tr>
        <tr>
            <td class="filt_cmd">~h regex</td>
            <td class="filt_help">Header</td>
        </tr>
        <tr>
            <td class="filt_cmd">~hq regex</td>
            <td class="filt_help">Request header</td>
        </tr>
        <tr>
            <td class="filt_cmd">~hs regex</td>
            <td class="filt_help">Response header</td>
        </tr>
        <tr>
            <td class="filt_cmd">~q</td>
            <td class="filt_help">Match request</td>
        </tr>
        <tr>
            <td class="filt_cmd">~s</td>
            <td class="filt_help">Match response</td>
        </tr>
        <tr>
            <td class="filt_cmd">~t regex</td>
            <td class="filt_help">Content-type header</td>
        </tr>
        <tr>
            <td class="filt_cmd">~tq regex</td>
            <td class="filt_help">Request Content-Type header</td>
        </tr>
        <tr>
            <td class="filt_cmd">~ts regex</td>
            <td class="filt_help">Request Content-Type header</td>
        </tr>
        <tr>
            <td class="filt_cmd">~u regex</td>
            <td class="filt_help">URL</td>
        </tr>
        <tr>
            <td class="filt_cmd">!</td>
            <td class="filt_help">unary not</td>
        </tr>
        <tr>
            <td class="filt_cmd">&amp;</td>
            <td class="filt_help">and</td>
        </tr>
        <tr>
            <td class="filt_cmd">|</td>
            <td class="filt_help">or</td>
        </tr>
        <tr>
            <td class="filt_cmd">(...)</td>
            <td class="filt_help">grouping</td>
        </tr>
</table>

<ul>
<li>Regexes are Python-style</li>
<li>Regexes can be specified as quoted strings</li>
<li>Header matching (~h, ~hq, ~hs) is against a string of the form "name: value".</li>
<li>Strings with no operators are matched against the request URL.</li>
<li>The default binary operator is &amp;.</li>
</ul>

<h1>Examples</h1>

<p>URL containing "google.com":</p>

<pre><code>google\.com
</code></pre>

<p>Requests whose body contains the string "test":</p>

<pre><code>~r ~b test
</code></pre>

<p>Anything but requests with a text/html content type:</p>

<pre><code>!(~r &amp; ~t \"text/html\")
</code></pre>

            </div>
        </div>
    </div>
    <div style="" id="ft" class="doc">
        <p>Â© mitmproxy project, 2011</p>
    </div>
</div>
</body></html>